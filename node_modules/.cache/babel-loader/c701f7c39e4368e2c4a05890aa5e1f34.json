{"ast":null,"code":"var _jsxFileName = \"/home/aronberenyi/Code/ancrypto/src/components/App/AppProvider.js\";\nimport React, { useState, useEffect } from 'react';\nimport cc from 'cryptocompare';\ncc.setApiKey('6bce00cebd36b06c07f20e0e94c2a0fe1b0211dc0a8a8dc030f6fb8b4117f707');\nexport const AppContext = React.createContext();\nconst MAX_FAVOURITES = 10;\nexport default (({\n  children\n}) => {\n  const [page, setPage] = useState('settings');\n  const [favourites, setFavourites] = useState(['BTC', 'ETH', 'XMR', 'DOGE']);\n  const [firstVisit, setFirstVisit] = useState(localStorage.getItem('ancrypto') ? false : true);\n  const [coinList, setCoinList] = useState(null);\n\n  const fetchCoins = async () => {\n    let coins = await cc.coinList();\n    coins = coins.Data;\n\n    try {\n      return coins;\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const addCoin = coinKey => {\n    if (favourites.length < MAX_FAVOURITES && !favourites.includes(coinKey)) {\n      setFavourites([...favourites, coinKey]);\n    }\n  };\n\n  const removeCoin = coinKey => {\n    setFavourites(favourites.filter(key => key !== coinKey));\n  };\n\n  useEffect(() => {\n    fetchCoins().then(coins => setCoinList(coins));\n  }, []);\n\n  const confirmFavourites = () => {\n    console.log('I am a genius');\n    setPage('dashboard');\n    setFirstVisit(false);\n    localStorage.setItem('ancrypto', JSON.stringify({\n      test: 'hello'\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(AppContext.Provider, {\n    value: {\n      page,\n      coinList,\n      setPage,\n      favourites,\n      addCoin,\n      removeCoin,\n      confirmFavourites,\n      firstVisit\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 5\n    }\n  }, children);\n});","map":{"version":3,"sources":["/home/aronberenyi/Code/ancrypto/src/components/App/AppProvider.js"],"names":["React","useState","useEffect","cc","setApiKey","AppContext","createContext","MAX_FAVOURITES","children","page","setPage","favourites","setFavourites","firstVisit","setFirstVisit","localStorage","getItem","coinList","setCoinList","fetchCoins","coins","Data","e","console","log","addCoin","coinKey","length","includes","removeCoin","filter","key","then","confirmFavourites","setItem","JSON","stringify","test"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,OAAOC,EAAP,MAAe,eAAf;AACAA,EAAE,CAACC,SAAH,CAAa,kEAAb;AACA,OAAO,MAAMC,UAAU,GAAGL,KAAK,CAACM,aAAN,EAAnB;AAEP,MAAMC,cAAc,GAAG,EAAvB;AAEA,gBAAe,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAgB;AAE3B,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBT,QAAQ,CAAC,UAAD,CAAhC;AACA,QAAM,CAACU,UAAD,EAAaC,aAAb,IAA8BX,QAAQ,CAAC,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,MAAtB,CAAD,CAA5C;AACA,QAAM,CAACY,UAAD,EAAaC,aAAb,IAA8Bb,QAAQ,CAACc,YAAY,CAACC,OAAb,CAAqB,UAArB,IAAmC,KAAnC,GAA2C,IAA5C,CAA5C;AACA,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BjB,QAAQ,CAAC,IAAD,CAAxC;;AAGA,QAAMkB,UAAU,GAAG,YAAY;AAC3B,QAAIC,KAAK,GAAG,MAAMjB,EAAE,CAACc,QAAH,EAAlB;AACAG,IAAAA,KAAK,GAAGA,KAAK,CAACC,IAAd;;AACA,QAAI;AAAC,aAAOD,KAAP;AAAa,KAAlB,CACA,OAAME,CAAN,EAAS;AAACC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AAAe;AAC5B,GALD;;AAOA,QAAMG,OAAO,GAAGC,OAAO,IAAI;AACvB,QAAIf,UAAU,CAACgB,MAAX,GAAoBpB,cAArB,IAAyC,CAACI,UAAU,CAACiB,QAAX,CAAoBF,OAApB,CAA7C,EAA2E;AACvEd,MAAAA,aAAa,CAAC,CAAC,GAAGD,UAAJ,EAAgBe,OAAhB,CAAD,CAAb;AACH;AACJ,GAJD;;AAMA,QAAMG,UAAU,GAAGH,OAAO,IAAI;AAC1Bd,IAAAA,aAAa,CAACD,UAAU,CAACmB,MAAX,CAAkBC,GAAG,IAAIA,GAAG,KAAKL,OAAjC,CAAD,CAAb;AACH,GAFD;;AAIAxB,EAAAA,SAAS,CAAE,MAAM;AAETiB,IAAAA,UAAU,GACTa,IADD,CACMZ,KAAK,IAAIF,WAAW,CAACE,KAAD,CAD1B;AAGX,GALY,EAKV,EALU,CAAT;;AASA,QAAMa,iBAAiB,GAAG,MAAM;AAC5BV,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAd,IAAAA,OAAO,CAAC,WAAD,CAAP;AACAI,IAAAA,aAAa,CAAC,KAAD,CAAb;AACAC,IAAAA,YAAY,CAACmB,OAAb,CAAqB,UAArB,EAAiCC,IAAI,CAACC,SAAL,CAAe;AAACC,MAAAA,IAAI,EAAE;AAAP,KAAf,CAAjC;AACH,GALD;;AAOA,sBACA,oBAAC,UAAD,CAAY,QAAZ;AAAqB,IAAA,KAAK,EACtB;AACI5B,MAAAA,IADJ;AAEIQ,MAAAA,QAFJ;AAGIP,MAAAA,OAHJ;AAIIC,MAAAA,UAJJ;AAKIc,MAAAA,OALJ;AAMII,MAAAA,UANJ;AAOII,MAAAA,iBAPJ;AAQIpB,MAAAA;AARJ,KADJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAWGL,QAXH,CADA;AAcH,CAvDD","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport cc from 'cryptocompare'\ncc.setApiKey('6bce00cebd36b06c07f20e0e94c2a0fe1b0211dc0a8a8dc030f6fb8b4117f707')\nexport const AppContext = React.createContext();\n\nconst MAX_FAVOURITES = 10;\n\nexport default ({children}) => {\n    \n    const [page, setPage] = useState('settings');\n    const [favourites, setFavourites] = useState(['BTC', 'ETH', 'XMR', 'DOGE']);\n    const [firstVisit, setFirstVisit] = useState(localStorage.getItem('ancrypto') ? false : true)\n    const [coinList, setCoinList] = useState(null)\n    \n    \n    const fetchCoins = async () => {\n        let coins = await cc.coinList()\n        coins = coins.Data\n        try {return coins}\n        catch(e) {console.log(e)}\n    }\n\n    const addCoin = coinKey => {\n        if((favourites.length < MAX_FAVOURITES ) && !favourites.includes(coinKey)) {\n            setFavourites([...favourites, coinKey]);\n        }\n    }\n\n    const removeCoin = coinKey => {\n        setFavourites(favourites.filter(key => key !== coinKey))\n    }\n\n    useEffect( () => {\n\n            fetchCoins()\n            .then(coins => setCoinList(coins))\n        \n}, [])\n\n\n\n    const confirmFavourites = () => {\n        console.log('I am a genius')\n        setPage('dashboard');\n        setFirstVisit(false)\n        localStorage.setItem('ancrypto', JSON.stringify({test: 'hello'}))\n    }\n\n    return (\n    <AppContext.Provider value={\n        {\n            page, \n            coinList, \n            setPage, \n            favourites, \n            addCoin, \n            removeCoin, \n            confirmFavourites, \n            firstVisit\n        }\n    }>{children}</AppContext.Provider>\n    )\n}"]},"metadata":{},"sourceType":"module"}